CREATE PROCEDURE [dbo].[update_store_proc_Record]    @ModuleId INT,	@WorkflowStageId INT,	@RecordId INT, 	@UpdatedDate datetime,	@ChildTvp updatechildDatas READONLY		ASBEGIN    --SET NOCOUNT ON;   	-- Insert data into Record table	UPDATE  Record 	set  ModuleId = @ModuleId , WorkflowStageId = @WorkflowStageId ,UpdatedDate = @UpdatedDate	WHERE Id = @RecordId;		-- Update UiPageStringType table	 -- Update UiPageStringType table    MERGE INTO UiPageStringType AS target    USING @ChildTvp AS source    ON (target.Id = source.ChildId)    WHEN MATCHED AND source.UiPageMetadataId IN (SELECT Id FROM UiPageMetadata WHERE DataTypeId = 2)	THEN        UPDATE SET target.Value = source.Value		-- WHEN NOT MATCHED SO INSERT INTO UiPageStringType		WHEN NOT MATCHED BY target AND source.UiPageMetadataId IN (SELECT Id FROM UiPageMetadata WHERE DataTypeId = 2)		THEN INSERT (UiPageMetadataId ,Value,UiPageDataId,RecordId)		VALUES (source.UiPageMetadataId,source.Value, source.Id,source.RecordId)       WHEN NOT MATCHED BY source AND target.UiPageDataId IN (SELECT Id FROM @ChildTvp ) THEN         DELETE;-- Update UiPageFileAttachType table		 MERGE INTO UiPageFileAttachType AS target    USING @ChildTvp AS source    ON (target.Id = source.ChildId)    WHEN MATCHED AND source.UiPageMetadataId IN (SELECT Id FROM UiPageMetadata WHERE DataTypeId = 3)	THEN        UPDATE SET target.Value = cast(source.Value as varbinary(max))		-- WHEN NOT MATCHED SO INSERT INTO UiPageStringType		WHEN NOT MATCHED BY target AND source.UiPageMetadataId IN (SELECT Id FROM UiPageMetadata WHERE DataTypeId = 3) 		THEN INSERT (UiPageMetadataId ,Value,UiPageDataId,RecordId)		VALUES (source.UiPageMetadataId,cast(source.Value as varbinary(max)), source.Id,source.RecordId)		WHEN NOT MATCHED BY source AND target.UiPageDataId IN (SELECT Id FROM @ChildTvp ) THEN         DELETE;		-- Update UiPageIntType table    MERGE INTO UiPageIntType AS target    USING @ChildTvp AS source    ON (target.Id = source.ChildId)    WHEN MATCHED AND source.UiPageMetadataId IN (SELECT Id FROM UiPageMetadata WHERE DataTypeId = 1)	THEN        UPDATE SET target.Value = source.Value		-- WHEN NOT MATCHED SO INSERT INTO UiPageStringType		WHEN NOT MATCHED BY target AND source.UiPageMetadataId IN (SELECT Id FROM UiPageMetadata WHERE DataTypeId = 1) 		THEN INSERT (UiPageMetadataId ,Value,UiPageDataId,RecordId)		VALUES (source.UiPageMetadataId,source.Value, source.Id,source.RecordId)		WHEN NOT MATCHED BY source AND target.UiPageDataId IN (SELECT Id FROM @ChildTvp ) THEN         DELETE;				-- Update UiPageDateType table    MERGE INTO UiPageDateType AS target    USING @ChildTvp AS source    ON (target.Id = source.ChildId)    WHEN MATCHED AND source.UiPageMetadataId IN (SELECT Id FROM UiPageMetadata WHERE DataTypeId = 5)	THEN        UPDATE SET target.Value = source.Value		-- WHEN NOT MATCHED SO INSERT INTO UiPageStringType		WHEN NOT MATCHED BY target AND source.UiPageMetadataId IN (SELECT Id FROM UiPageMetadata WHERE DataTypeId = 5) 		THEN INSERT (UiPageMetadataId ,Value,UiPageDataId,RecordId)		VALUES (source.UiPageMetadataId,source.Value, source.Id,source.RecordId)		WHEN NOT MATCHED BY source AND target.UiPageDataId IN (SELECT Id FROM @ChildTvp ) THEN         DELETE;		--WHEN NOT MATCHED BY source AND target.UiPageMetadataId IN (SELECT Id FROM UiPageMetadata WHERE DataTypeId = 1)  --      THEN DELETE;		END