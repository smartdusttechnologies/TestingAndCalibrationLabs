@model TestingAndCalibrationLabs.Web.UI.Models.UiPageMetadataDTO
@{
    ViewData["Title"] = "Create";
}
<h1>Ui Page Metadata</h1>
<h4>Create</h4>
<hr />
<style>
    .scrollling-text-container {
        width: 100%; /* Adjust width as needed */
        overflow: hidden; /* Hide overflowing content */
    }

    .scrolling-content {
        display: inline-block; /* Use inline-block to keep elements in one line */
        white-space: nowrap; /* Prevent text from wrapping */
        /*animation: moveRightToLeft 10s linear infinite;*/ /* Adjust animation duration and timing as needed */
        display: flex;
        color: darkturquoise;
    }

</style>
<div class="row">
    <div class="row ms-1 me-1">
        <form asp-action="Create" _lpchecked="1" class="mb-2" id="pageForm" method="post" asp-controller="UiPageMetadata" novalidate>
            <div asp-validation-summary="All"></div>
            <div id="error-message-top" style="color: red; display: none;"></div>
            @*<div class="row ms-1 me-1">*@

            <div class="row">
                <div class=" col-lg-6  col-sm-12 col-xs-12 mt-3 ms-3">
                    <div id="payInvoice" class="floatBlock">
                        <label for="paymentInv">
                            <input id="paymentInv" onclick="NonExixt()" name="paymentType" type="radio" value="INVOICE" /> New
                        </label>
                    </div>
                    <div id="pay3rdParty" class="floatBlock">
                        <label for="payment3rd">
                            <input id="payment3rd" onclick="ModuleGet()" name="paymentType" type="radio" /> Existing
                        </label>
                    </div>

                </div>
            </div>
            <div class="row">
                <div class=" col-lg-6   col-sm-12 col-xs-12 mt-3 form-element-for-common-control  right-pd-input">
                    <select class="form-input width-full black-border " name="ModuleLayoutId" id="ModuleLayout" onchange="this.setAttribute('value',this.value)" asp-for="ModuleLayoutId" required>
                        <option disabled="disabled" selected="selected">Select ModuleLayoutName ...</option>
                        @foreach (var item in ViewBag.Modulelist)
                        {
                            <option value=@item.Id>@item.Name</option>
                        }
                    </select>
                    <label for="ModuleLayoutId" class="form-label">
                        ModuleLayoutName
                    </label>
                </div>
                <div class=" col-lg-6   col-sm-12 col-xs-12 mt-3 form-element-for-common-control  right-pd-input" id="Pagetype">
                    <select class="form-input width-full black-border " name="UiPageTypeId" id="UiPageType" onchange="this.setAttribute('value',this.value)" asp-for="UiPageTypeId" required>
                        <option disabled="disabled" selected>Select Pages ...</option>

                    </select>
                    <label for="UiPageTypeId" class="form-label">
                        UiPageTypeName
                    </label>
                </div>
            </div>
            <div class="row">
                <div class=" col-lg-6   col-sm-12 col-xs-12 mt-3 form-element-for-common-control  right-pd-input ui-page-metadataControl-select " id="UiControlType">
                    <select class="form-input width-full black-border" name="UiControlTypeId" id="UiControlTypeId" onchange="this.setAttribute('value',this.value)" asp-for="UiControlTypeId" required>
                        <option disabled="disabled" selected>Select ControlType ...</option>
                        @foreach (var item in ViewBag.UiControlTypes)
                        {
                            <option value=@item.Id>@item.Name</option>
                        }

                    </select>
                    <label for="UiControlTypeId" class="form-label">
                        UiControlTypeName
                    </label>
                </div>

                <div class="col-lg-6   col-sm-12 col-xs-12 mt-3 form-element-for-common-control  right-pd-input ui-page-metadataCategry-select" id="UiControlCategoryType">
                    <select class="form-input width-full black-border " name="UiControlCategoryTypeId" id="UiControlCategoryTypeId" onchange="this.setAttribute('value',this.value)" asp-for="UiControlCategoryTypeId" required>
                        <option disabled="disabled" selected>Select ControlCategory...</option>

                    </select>
                    <label for="UiControlCategoryTypeId" class="form-label">
                        UiControlCategoryTypeName
                    </label>
                </div>
            </div>
            <div class="row">
                <div class="col-lg-6   col-sm-12 col-xs-12 mt-3 form-element-for-common-control  right-pd-input ui-page-Datatype-select" id="DataTypeId">
                    <select class="form-input width-full black-border" name="DataTypeId" id="DataType" onchange="this.setAttribute('value',this.value)" asp-for="DataTypeId" required>
                        <option disabled="disabled" selected>Select Data Type ...</option>
                        @foreach (var item in ViewBag.DataTypes)
                        {
                            <option value=@item.Id>@item.Name</option>
                        }
                    </select>
                    <label for="DataType" class="form-label">
                        DataType
                    </label>
                </div>


                <div class="col-lg-6  col-sm-12 col-xs-12 mt-3 form-element-for-common-control  right-pd-frm-input ui-Name-select" id="NameContyrol">
                    <input class="form-input width-full black-border" type="text" id="Name" name="Name" placeholder=" " onchange="this.setAttribute('value',this.value)" asp-for="Name" required>
                    <label class="form-label" for="Name">Name</label>
                </div>


            </div>
            <div class="row">
                <div class="col-lg-6   col-sm-12 col-xs-12 mt-3 form-element-for-common-control  right-pd-input">
                    <select class="form-input width-full black-border" name="ParentId" id="Parent" onchange="this.setAttribute('value',this.value)" asp-for="ParentId" data-val="false" data-val-required="false">
                        <option disabled="disabled" selected>Select ParentName ...</option>

                    </select>
                    <label for="ParentId" class="form-label">
                        ParentName
                    </label>
                </div>


                <div class=" col-lg-6  col-sm-12 col-xs-12 mt-3 form-element-for-common-control  right-pd-input ui-page-metadata-select">
                    <select class="form-input width-full black-border " name="UiPageMetadataId" id="UiPageMetadata" placeholder=" " rows="1" onchange="this.setAttribute('value',this.value)" asp-for="UiPageMetadataId" required>
                        <option disabled="disabled" selected>Select UiPageMetadata ...</option>
                    </select>
                    <label class="form-label" for="UiPageMetadataId"> UiPageMetadata</label>
                </div>
            </div>
            <div class="row">
                <div class="col-lg-6   col-sm-12 col-xs-12 mt-3 form-element-for-common-control  right-pd-input" id="MultiValueControlId">
                    <select class="form-input width-full black-border" name="MultiValueControl" onchange="this.setAttribute('value',this.value)" asp-for="MultiValueControl">
                        <option disabled="disabled" selected>Select MultiValueControl ...</option>
                        <option value="True">True</option>
                        <option value="False">False</option>
                    </select>
                    <label for="MultiValueControl" class="form-label">
                        MultiValueControl
                    </label>
                </div>


                <div class="col-lg-6  col-sm-12 col-xs-12 mt-3 form-element-for-common-control  right-pd-frm-input">
                    <input class="form-input width-full black-border" type="text" id="Orders" name="Orders" placeholder=" " onchange="this.setAttribute('value',this.value)" asp-for="Orders">
                    <label class="form-label" for="Orders">Orders</label>
                </div>
            </div>
            <div class="row">
                <div class="col-lg-6  col-sm-12 col-xs-12 mt-3 form-element-for-common-control  right-pd-frm-input">
                    <input class="form-input width-full black-border" type="text" id="UiControlDisplayName" name="UiControlDisplayName" placeholder=" " onchange="this.setAttribute('value',this.value)" asp-for="UiControlDisplayName" required>
                    <label class="form-label" for="UiControlDisplayName">UiControlDisplayName</label>
                </div>

                <div class=" col-lg-6 col-lg-3 col-sm-12 col-xs-12 mt-3 ui-Required-select" id="Required">
                    <label class="form-check-label-met">
                        <input class="form-check-input" asp-for="IsRequired" />
                        @Html.DisplayNameFor(model => model.IsRequired)
                    </label>
                </div>

            </div>
            <div class="col-lg-6  col-sm-12 col-xs-12 mt-3 form-element-for-common-control  right-pd-frm-input">
                <input type="submit" id="createButton" value="Create" class="btn btn-lg btn-submit-print text-white" style=" background-color:#4250b5;" onchange="this.setAttribute('value',this.value)" />
                <div id="error-message" style="color: red;"></div>
            </div>
            @* </div>*@
        </form>
    </div>
</div>
<div>
    <a asp-action="Index">Back to List</a>
</div>
<script>
    function ModuleGet() {
        debugger;
        var selectElement = document.querySelector('.ui-page-metadata-select');
        selectElement.style.pointerEvents = 'auto';  // Enable pointer events
        selectElement.style.opacity = '1'; // Set full opacity for visibility and indicate it's editable

        var selectElement = document.querySelector('.ui-page-metadataControl-select');
        selectElement.style.pointerEvents = 'none';
        selectElement.style.opacity = '0.5';

        var selectElement = document.querySelector('.ui-page-metadataCategry-select');
        selectElement.style.pointerEvents = 'none';
        selectElement.style.opacity = '0.5';

        var selectElement = document.querySelector('.ui-page-Datatype-select');
        selectElement.style.pointerEvents = 'none';
        selectElement.style.opacity = '0.5';

        var selectElement = document.querySelector('.ui-Required-select');
        selectElement.style.pointerEvents = 'none';
        selectElement.style.opacity = '0.5';

        var selectElement = document.querySelector('.ui-Name-select');
        selectElement.style.pointerEvents = 'none';
        selectElement.style.opacity = '0.5';
    }

    $('#ModuleLayout').change(function () {
        var selectedId = $(this).val();
        debugger;
        $.ajax({
            type: 'GET',
            url: "@Url.Action("GetPages","UiPageMetadata")",
            data: { id: selectedId }, // Send selected ID as parameter
            success: function (response) {
                debugger;
                $("#UiPageType").empty();
                $("#UiPageType").append("<option disabled selected>Select UipageType ...</option>");

                for (var i = 0; i < response.length; i++) {
                    var MetadataId = response[i].id;
                    var ControleName = response[i].name;

                    $("#UiPageType").append("<option value='" + MetadataId + "'>" + ControleName + "</option>");

                }
            },
            error: function (xhr, status, error) {
                console.error(xhr.responseText);
            }
        });

        var moduleLayoutId = document.getElementById('ModuleLayout').value
        $.ajax({
            type: "GET",
            url: "@Url.Action("GetExistingResult","UiPageMetadata")",
            data: { moduleLayoutId: moduleLayoutId },
            success: function (response) {
                debugger;
                $("#UiPageMetadata").empty();
                $("#UiPageMetadata").append("<option disabled selected>Select UiPageMetadata ...</option>");
                for (var i = 0; i < response.length; i++) {
                    var MetadataId = response[i].id;
                    var ControleName = response[i].controlTypeName;

                    $("#UiPageMetadata").append("<option value='" + MetadataId + "'>" + ControleName + "</option>");

                }
            },
            error: function (req, status, error) {
            }
        });
    });
    Pagetype
    $('#UiControlTypeId').change(function () {
        var Control = $(this).val();
        debugger;
        $.ajax({
            type: 'GET',
            url: "@Url.Action("GetControlCategoryType","UiPageMetadata")",
            data: { id: Control }, // Send selected ID as parameter
            success: function (response) {
                debugger;
                $("#UiControlCategoryTypeId").empty();
                $("#UiControlCategoryTypeId").append("<option disabled selected>Select UiControlCategoryType ...</option>");
                for (var i = 0; i < response.length; i++) {
                    var MetadataId = response[i].id;
                    var ControleName = response[i].name;

                    $("#UiControlCategoryTypeId").append("<option value='" + MetadataId + "'>" + ControleName + "</option>");

                }
            },
            error: function (xhr, status, error) {
                console.error(xhr.responseText);
            }
        });

    });
    $('#UiPageType').change(function () {
        var Control = $(this).val();
        var ModuleValue = document.getElementById('ModuleLayout').value;
        debugger;
        $.ajax({
            type: 'GET',
            url: "@Url.Action("GetparentType","UiPageMetadata")",
            data: { id: Control, ModuleIds: ModuleValue }, // Send selected ID as parameter
            success: function (response) {
                debugger;
                $("#Parent").empty();
                $("#Parent").append("<option disabled selected>Select ParentName ...</option>");

                // Loop through the response data and append options
                for (var i = 0; i < response.length; i++) {
                    var MetadataId = response[i].id;
                    var ControleName = response[i].uiControlDisplayName;

                    $("#Parent").append("<option value='" + MetadataId + "'>" + ControleName + "</option>");
                }
            },
            error: function (xhr, status, error) {
                console.error(xhr.responseText);
            }
        });

    });

    var dataAvailable
    function NonExixt() {
        debugger;

        var selectElement = document.querySelector('.ui-page-metadata-select');
        if (dataAvailable) {
            selectElement.style.pointerEvents = 'auto';
            selectElement.style.opacity = '1'; // Reset opacity to make controls fully visible
        } else {
            selectElement.style.pointerEvents = 'none';
            selectElement.style.opacity = '0.5';  // Hide the dropdown
            document.getElementById('UiControlType').style.pointerEvents = 'auto';
            document.getElementById('UiControlType').style.opacity = '1';
            document.getElementById('UiControlCategoryType').style.pointerEvents = 'auto';
            document.getElementById('UiControlCategoryType').style.opacity = '1';
            document.getElementById('DataTypeId').style.pointerEvents = 'auto';
            document.getElementById('DataTypeId').style.opacity = '1';
            document.getElementById('Required').style.pointerEvents = 'auto';
            document.getElementById('Required').style.opacity = '1';
            document.getElementById('NameContyrol').style.pointerEvents = 'auto';
            document.getElementById('NameContyrol').style.opacity = '1';


        }
    }
    document.getElementById("createButton").addEventListener("click", function () {
        var radioButtons = document.getElementsByName("paymentType");
        var radioSelected = false;
        for (var i = 0; i < radioButtons.length; i++) {
            if (radioButtons[i].checked) {
                radioSelected = true;
                break;
            }
        }

        if (!radioSelected) {
            var errorMessageTop = document.getElementById("error-message-top");
            errorMessageTop.innerText = "You have not selected the radio button.";
            errorMessageTop.style.display = "block";
            document.getElementById("error-message").innerText = "";
            event.preventDefault();
        } else {
            document.getElementById("error-message").innerText = "";
            document.getElementById("error-message-top").style.display = "none";
        }
    });


</script>

@section Scripts {
    @{
        await Html.RenderPartialAsync("_ValidationScriptsPartial");
    }
    }
