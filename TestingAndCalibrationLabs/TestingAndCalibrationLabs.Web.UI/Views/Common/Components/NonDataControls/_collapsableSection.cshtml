@model TestingAndCalibrationLabs.Business.Common.Node<TestingAndCalibrationLabs.Business.Core.Model.UiPageMetadataModel>

@*<div class="container mt-3">
    <h2>@Model.Value.UiControlDisplayName</h2>


    <div id="accordion">
        @foreach (var item in Model.Children)
        {
            <div class="card">
                <div class="card-header">
                    <a class="btn" data-bs-toggle="collapse" href="#@item.Value.Id">
                        @item.Value.UiControlDisplayName
                    </a>
                </div>
                <div id="@item.Value.Id" class="collapse show" data-bs-parent="#accordion">
                    <div class="card-body">
                      @foreach(var node in item.Children){
                            if (node.Value.ControlCategoryName == "DataControl")
                            {
                                @Html.Partial("~/Views/Common/Components/_dataControls.cshtml",node )
                            }
                            else if (node.Value.ControlCategoryName == "NonDataControl")
                            {
                                @Html.Partial("~/Views/Common/Components/_nondataControl.cshtml",node)
                            }
                      }
                    </div>
                </div>
            </div>
        }


    </div>
</div>*@
@*THis is another code*@
@*<style>
    .collapsible {
        background-color: #777;
        color: white;
        cursor: pointer;
        padding: 18px;
        width: 100%;
        border: none;
        text-align: left;
        outline: none;
        font-size: 15px;
    }

        .collapsible:hover {
            background-color: #555;
        }

    .content {
        padding: 0 18px;
        display: none;
        overflow: hidden;
        background-color: #f1f1f1;
    }
</style>


<h2>Collapsibles</h2>

<p>A Collapsible:</p>
@foreach (var item in Model.Children)
{
    <button type="button" id="@item.Value.Id" class="collapsible">@item.Value.UiControlDisplayName</button>
    <div class="content" id="colap-@item.Value.Id">
        @foreach (var node in item.Children)
        {
            if (node.Value.ControlCategoryName == "DataControl")
            {
                @Html.Partial("~/Views/Common/Components/_dataControls.cshtml",node )
            }
            else if (node.Value.ControlCategoryName == "NonDataControl")
            {
                @Html.Partial("~/Views/Common/Components/_nondataControl.cshtml",node)
            }
        }
    </div>
}

*@

<script>
    //var coll = document.getElementsByClassName("collapsible");
    //var i;

    //for (i = 0; i < coll.length; i++) {
    //    coll[i].addEventListener("click", function () {
    //        this.classList.toggle("active");
    //        var content = this.nextElementSibling;
    //        debugger;
    //        if (content.style.display === "block") {
    //            content.style.display = "none";
    //        } else {
    //            content.style.display = "block";
    //        }
    //    });
    //}
    //$(function () {
    //    var curentElement;
    //    var count = 0;
    //    $(".collapsible").click(function () {
    //        var Ids = $(this)[0].id;
    //        var raj = $(this);
    //        var elementId = "#colap-" + Ids; 
    //        if (count != 0) {
    //            curentElement[0].style.display = "none";
    //        }
    //        count++;
    //        var element = $(elementId);
    //        debugger;
    //        if (element[0].style.display === "block") {
    //            element[0].style.display = "none";
    //        } else {
    //            element[0].style.display = "block";
    //        }
    //        curentElement = element;
    //        debugger;
    //        alert("this is id" + Ids);
    //    });
    //});
</script>
<div class="accordion" id="accordionExample">
    @foreach(var item in Model.Children){
        @if (Model.Children.First() == item)
        {
            <div class="card">
                <div class="card-header" id="@item.Value.Id">
                    <h2 class="mb-0">
                        <button class="btn " type="button" data-toggle="collapse" data-target="#collapse-@item.Value.Id" aria-expanded="true" aria-controls="collapse-@item.Value.Id">
                            @item.Value.UiControlDisplayName
                        </button>
                    </h2>
                </div>

                <div id="collapse-@item.Value.Id" class="collapse show" aria-labelledby="headingOne" data-parent="#accordionExample">
                    <div class="card-body">
                        @foreach (var node in item.Children)
                        {
                            if (node.Value.ControlCategoryName == "DataControl")
                            {
                                @Html.Partial("~/Views/Common/Components/_dataControls.cshtml",node )
                            }
                            else if (node.Value.ControlCategoryName == "NonDataControl")
                            {
                                @Html.Partial("~/Views/Common/Components/_nondataControl.cshtml",node)
                            }
                        }
                    </div>
                </div>
            </div>
        }else{
            <div class="card">
                <div class="card-header" id="@item.Value.Id">
                    <h2 class="mb-0">
                        <button class="btn  collapsed" type="button" data-toggle="collapse" data-target="#collapse-@item.Value.Id" aria-expanded="true" aria-controls="collapse-@item.Value.Id">
                            @item.Value.UiControlDisplayName
                        </button>
                    </h2>
                </div>

                <div id="collapse-@item.Value.Id" class="collapse" aria-labelledby="headingOne" data-parent="#accordionExample">
                    <div class="card-body">
                        @foreach (var node in item.Children)
                        {
                            if (node.Value.ControlCategoryName == "DataControl")
                            {
                                @Html.Partial("~/Views/Common/Components/_dataControls.cshtml",node )
                            }
                            else if (node.Value.ControlCategoryName == "NonDataControl")
                            {
                                @Html.Partial("~/Views/Common/Components/_nondataControl.cshtml",node)
                            }
                        }
                    </div>
                </div>
            </div>
        }
    }
</div>